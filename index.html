<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>PGVER Roulette</title>
<style>
  html,body{
    margin:0;
    padding:0;
    width:100%;
    height:100%;
    overflow:hidden;
    display:flex;
    justify-content:center;
    align-items:center;
  }
  canvas#mainCanvas{
    position:absolute;
    top:0; left:0;
    width:100%; height:100%;
    z-index:-1;
  }
  .glitch::before,.glitch::after{
    content:attr(data-text);
    position:absolute; left:0; top:0; width:100%;
  }
  .glitch::before{
    left:2px;text-shadow:-2px 0 red;
    animation:glitchTop 2s infinite linear alternate-reverse;
  }
  .glitch::after{
    left:-2px;text-shadow:-2px 0 cyan;
    animation:glitchBottom 2s infinite linear alternate-reverse;
  }
  @keyframes glitchTop{0%{clip:rect(42px,9999px,44px,0)}50%{clip:rect(12px,9999px,90px,0)}100%{clip:rect(85px,9999px,140px,0)}}
  @keyframes glitchBottom{0%{clip:rect(12px,9999px,50px,0)}50%{clip:rect(85px,9999px,140px,0)}100%{clip:rect(42px,9999px,44px,0)}}
</style>
</head>
<body>
<p id="loading">Rolling the PGVER dice...</p>

<!-- Templates for each theme -->
<template id="cthulhu">
  <style>
    :root{--bg1:#0a0000;--bg2:#1a0000;--accent:#d60000;--text:#ffcccc;--font:'UnifrakturCook',cursive;}
    body{background:radial-gradient(circle,var(--bg1),var(--bg2));color:var(--text);font-family:var(--font);overflow:hidden;}
    .pg-logo{font-size:10vw;letter-spacing:0.05em;text-shadow:0 0 12px var(--accent),0 0 40px var(--accent);animation:flicker 2.5s infinite alternate;}
    @keyframes flicker{0%,100%{opacity:1;filter:blur(0)}50%{opacity:0.6;filter:blur(1px) hue-rotate(10deg);}}
    .nxt-btn{position:fixed;top:1rem;right:1rem;background:transparent;border:1px solid var(--accent);color:var(--text);font-family:monospace;padding:.4rem .8rem;cursor:pointer;text-transform:uppercase;letter-spacing:.1em;transition:.3s;}
    .nxt-btn:hover{background:var(--accent);color:#000;}
  </style>
  <button class="nxt-btn" onclick="nextSong()">Nxt</button>
  <div class="pg-logo glitch" data-text="PG">PG</div>
  <canvas id="mainCanvas"></canvas>
</template>

<template id="metal">
  <style>
    :root{--bg1:#0d0d0f;--bg2:#1e1e23;--accent:#8fbaff;--text:#e0e0e0;--font:'Orbitron',sans-serif;}
    body{background:linear-gradient(135deg,var(--bg1),var(--bg2));color:var(--text);font-family:var(--font);overflow:hidden;}
    .pg-logo{font-size:10vw;letter-spacing:0.05em;background:linear-gradient(90deg,#bbb,#fff,#bbb);-webkit-background-clip:text;color:transparent;text-shadow:0 0 10px var(--accent);}
    .nxt-btn{position:fixed;top:1rem;right:1rem;background:transparent;border:1px solid var(--accent);color:var(--text);font-family:monospace;padding:.4rem .8rem;cursor:pointer;text-transform:uppercase;letter-spacing:.1em;transition:.3s;}
    .nxt-btn:hover{background:var(--accent);color:#000;}
  </style>
  <button class="nxt-btn" onclick="nextSong()">Nxt</button>
  <div class="pg-logo glitch" data-text="PG">PG</div>
  <canvas id="mainCanvas"></canvas>
</template>

<template id="original">
  <style>
    :root{--bg1:#000;--bg2:#111;--accent:#ff00ff;--text:#fff;--font:'Courier New',monospace;}
    body{background:linear-gradient(180deg,var(--bg1),var(--bg2));color:var(--text);font-family:var(--font);overflow:hidden;}
    .pg-logo{font-size:10vw;letter-spacing:0.05em;color:var(--accent);text-shadow:0 0 20px var(--accent);}
    .nxt-btn{position:fixed;top:1rem;right:1rem;background:transparent;border:1px solid var(--accent);color:var(--text);font-family:monospace;padding:.4rem .8rem;cursor:pointer;text-transform:uppercase;letter-spacing:.1em;transition:.3s;}
    .nxt-btn:hover{background:var(--accent);color:#000;}
  </style>
  <button class="nxt-btn" onclick="nextSong()">Nxt</button>
  <div class="pg-logo glitch" data-text="PG">PG</div>
  <canvas id="mainCanvas"></canvas>
</template>

<script>
  // pick a random theme
  const themes = ['cthulhu','metal','original'];
  const pick = themes[Math.floor(Math.random()*themes.length)];
  const tpl = document.getElementById(pick).content.cloneNode(true);
  document.body.innerHTML = '';
  document.body.appendChild(tpl);

  // shared JS
  const songs = [
    "assets/songs/track1.mp3",
    "assets/songs/track2.mp3",
    "assets/songs/track3.mp3"
  ];
  let currentSong = 0;
  let audio = new Audio(songs[currentSong]);
  audio.loop = true;
  audio.volume = 0.7;
  audio.play();

  function nextSong(){
    currentSong = (currentSong+1)%songs.length;
    audio.pause();
    audio = new Audio(songs[currentSong]);
    audio.loop = true;
    audio.volume = 0.7;
    audio.play();
  }

  // placeholder canvas logic â€“ replace with your PGVER scripts
  const c = document.getElementById("mainCanvas");
  if(c){
    const ctx = c.getContext("2d");
    c.width = innerWidth;
    c.height = innerHeight;
    ctx.fillStyle = "rgba(255,255,255,0.05)";
    setInterval(()=>ctx.fillRect(Math.random()*c.width,Math.random()*c.height,2,2),30);
  }
</script>
</body>
</html>
